<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TV Player with AdBlock Detection</title>
  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
  <style>
    body {margin:0;padding:0;background:#000;color:#fff;font-family:sans-serif;}
    #player {width:100%;height:60vh;background:#000;}
    /* Overlay style */
    #adblock-overlay {
      position: fixed;top:0;left:0;width:100%;height:100%;
      background:rgba(0,0,0,0.9);color:#000;z-index:10000;
      display:flex;justify-content:center;align-items:center;
    }
    #adblock-overlay div {
      background:#fff;padding:20px;border-radius:10px;
      max-width:400px;text-align:center;font-family:sans-serif;
    }
    #adblock-overlay h2 {margin-bottom:10px;}
    #adblock-overlay button {
      margin-top:15px;padding:10px 20px;border:none;
      border-radius:6px;background:#1a73e8;color:#fff;cursor:pointer;
    }
  </style>
</head>
<body>
  <!-- Video Player -->
  <video id="player" controls autoplay playsinline></video>

  <script>
    // Playlist Example
    const video = document.getElementById('player');
    const streamUrl = "https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8";

    if (Hls.isSupported()) {
      const hls = new Hls();
      hls.loadSource(streamUrl);
      hls.attachMedia(video);
    } else {
      video.src = streamUrl;
    }

    // AdBlock Detection
    (function () {
      function detectAdBlock() {
        return new Promise((resolve) => {
          let bait = document.createElement("div");
          bait.className = "adsbox ad-unit";
          bait.style.width = "1px";
          bait.style.height = "1px";
          bait.style.position = "absolute";
          bait.style.left = "-9999px";
          document.body.appendChild(bait);

          let adScript = document.createElement("script");
          adScript.src = "//www.highperformanceformat.com/0e4c12e19122f03ae09be7e4194b5eca/invoke.js";
          let adScriptLoaded = false;
          adScript.onload = () => { adScriptLoaded = true; };
          adScript.onerror = () => { adScriptLoaded = false; };
          document.body.appendChild(adScript);

          setTimeout(() => {
            let isBlocked =
              bait.offsetParent === null ||
              window.getComputedStyle(bait).display === "none" ||
              !adScriptLoaded;
            document.body.removeChild(bait);
            document.body.removeChild(adScript);
            resolve(isBlocked);
          }, 500);
        });
      }

      function showAdblockPopup() {
        let overlay = document.createElement("div");
        overlay.id = "adblock-overlay";
        overlay.innerHTML = `
          <div>
            <h2>AdBlocker Detected!</h2>
            <p>Please disable AdBlock to continue using this site.</p>
            <button id="refreshPage">I Disabled AdBlock</button>
          </div>
        `;
        document.body.appendChild(overlay);

        document.getElementById("refreshPage").addEventListener("click", () => {
          location.reload();
        });
      }

      window.addEventListener("load", () => {
        detectAdBlock().then((adBlockDetected) => {
          if (adBlockDetected) {
            showAdblockPopup();
          }
        });
      });
    })();
  </script>
</body>
</html>